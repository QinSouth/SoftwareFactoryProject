<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>预收冲款单</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="../../css/font.css">
		<link rel="stylesheet" href="../../css/xadmin.css">
		<script src="../../js/jquery.min.js"></script>
		<script type="text/javascript" src="../../lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="../../js/xadmin.js"></script>

		<style type="text/css">
			.layui-input-block {
				margin-left: 120px;
				min-height: 36px;
			}
			
			.layui-row {
				margin-bottom: 10px;
			}
			
			.layui-form-label {
				float: left;
				display: block;
				padding: 9px 5px;
				width: 85px;
				font-weight: 400;
				line-height: 20px;
				text-align: right;
			}
			
			.layui-form-item {
				margin-top: 5px;
				margin-bottom: 5px;
				clear: none;
				display: inline-block;
			}
			
			.layui-tab-title li {
				padding: 0 0px;
			}
			
			.layui-table {
				width: 100%;
				background-color: #fff;
				color: #666;
				overflow-y: auto;
			}
			
			.layui-table thead tr {
				background-color: #d7e7ff !important;
			}
			
			.layui-table td,
			.layui-table th {
				border-width: 1px;
				border-style: solid;
				border-color: #d3d1d1;
			}
			
			.color {
				color: blue;
			}
		</style>
	</head>

	<body>
		<div id="vue_fw" class="x-body">
			<div class="layui-container" style="padding: 8px;">
				<div class="layui-row">
					<div class="layui-col-md12">
						<span style="font-size: 18px;padding-left: 15px;">
			   			预收款单
			   		</span>
					</div>
				</div>
				<div style="padding: 10px;">
					<div class="layui-row">
						<form class="layui-form" action="">
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label color">客户</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label color">单据日期</label>
								<div class="layui-input-block">								
									<input v-model="advances_received_main_y.priabill_payablestime" id="date" type="text" name="title"  required  lay-verify="required" placeholder="请输入客户名称" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">结算方式一</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="转账" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label color">单据号码</label>
								<div class="layui-input-block">
									<input type="text" v-model="advances_received_main_y.priabill_id" name="title" required lay-verify="required" placeholder="" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">结算方式二</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="汇票" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label color">币别</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">结算方式三</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="现金" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">汇率</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="1.0000" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">折扣率（%）</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="0.00" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">应收冲款类型</label>
								<div class="layui-input-block">
									<input type="text" readonly="readonly" name="title" required lay-verify="required" placeholder="预收冲款" autocomplete="off" class="layui-input">
									<!-- 
									<select name="city" lay-verify="required">
										<option value=""></option>
										<option value="0">预收款</option>
										<option value="1">收款冲款</option>
										<option value="2">预收冲应收</option>
									</select>
									-->
								</div>							
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">终止账月</label>
								<div class="layui-input-block">
									<input type="date" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">凭证编号</label>
								<div class="layui-input-block">
									<input type="text" readonly="readonly" name="title" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
						</form>
					</div>
					<div class="layui-row">
						<div class="layui-tab">
							<ul class="layui-tab-title">
								<li class="layui-this">内容</li>
								<li>备注</li>
							</ul>
							<div class="layui-tab-content">
								<div class="layui-tab-item layui-show">
									<div style="border:1px solid #8eafdb;padding:8px;">
										<div style="overflow: scroll;">
											<table class="layui-table" lay-size="sm" style="width: 150%;">
												<thead>
													<tr>
														<td>(栏号)</td>
														<td class="color">物料编号</td>
														<td>(物料名称)</td>
														<td>(规格型号)</td>
														<td>(单位名称)</td>
														<td>数量</td>
														<td>折扣前单价</td>
														<td>折数(%)</td>
														<td>单价</td>
														<td>金额</td>
														<td>(税率)</td>
														<td>(税额)</td>
														<td>(含税金额)</td>
														<td>预入库日</td>
														<td>(未入库量)</td>
														<td>赠品</td>
														<td>分录备注</td>
														<td>(来源单别)</td>
														<td>(来源单号)</td>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td colspan="18" align="center">内容</td>
													</tr>
												</tbody>
												<tfoot>
													<tr>
														<td colspan="5">合计:</td>
														<td colspan="4">55</td>
														<td colspan="2">97.55</td>
														<td>16.55</td>
														<td colspan="2">114.55</td>
														<td colspan="5">0</td>
													</tr>
												</tfoot>
											</table>
										</div>
									</div>
								</div>
								<div class="layui-tab-item">
									<form class="layui-form" action="">
										<div class="layui-form-item layui-col-md6">
											<label class="layui-form-label">表头条文</label>
											<div class="layui-input-block">
												<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-form-item layui-col-md6">
											<label class="layui-form-label">自定栏一</label>
											<div class="layui-input-block">
												<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-form-item layui-col-md6">
											<label class="layui-form-label">表尾条文</label>
											<div class="layui-input-block">
												<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-form-item layui-col-md6">
											<label class="layui-form-label">自定栏二</label>
											<div class="layui-input-block">
												<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-form-item layui-col-md12">
											<label class="layui-form-label">备注</label>
											<div class="layui-input-block">
												<textarea rows="12" name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="layui-row">
						<form class="layui-form" action="">

							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">制单人员</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label color">所属部门</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">复核人员</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-form-item layui-col-md6">
								<label class="layui-form-label">所属项目</label>
								<div class="layui-input-block">
									<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
								</div>
							</div>
						</form>
					</div>
					<div class="layui-row">
						<button class="layui-btn layui-btn-normal" style="width: 8%;">查询</button>
						<button class="layui-btn layui-btn-normal" style="width: 8%;">转单</button>
						<button class="layui-btn layui-btn-normal" style="width: 8%;">功能</button>
					</div>
				</div>
			</div>
		</div>

		<script src="../../js/jquery.min.js"></script>
		<script src="../../layui.all.js"></script>
		<script src="../../layui.js"></script>
		<script src="../../js/vue.js"></script>

		<script type="text/javascript">
			var vue=new Vue({
			  el:"#vue_fw",
			  data:{
				  advances_received_main_y:{}
			  },
			  methods:{
				 gt_select_payablestime:function(payablestime){
				 	  var vue_ = this;
				 	
					  $.ajax({
					  	type:"get",				  	
					  	url:"http://localhost:8080/SoftwareFactoryProject_/gt_AdvancesReceivedMainY/gt_select_payablestime?payablestime="+payablestime,
						async: false,					  	
					  	success:function(result){
					  		vue_.advances_received_main_y.priabill_id = result;
					  	}
					  })
				 },
				 gt_on_select_payablestime:function(){
				 	this.gt_select_payablestime(this.advances_received_main_y.priabill_payablestime);				 	
				 }
			  },
			  created:function(){
			  	var now = new Date();
				//格式化日，如果小于9，前面补0  
				var day = ("0" + now.getDate()).slice(-2);  
				//格式化月，如果小于9，前面补0  
				var month = ("0" + (now.getMonth() + 1)).slice(-2);  
				//拼装完整日 期格式  
				var today = now.getFullYear()+"-"+(month)+"-"+(day) ;  
				//将获取的当前日期赋值给主表的单据日期
				this.advances_received_main_y.priabill_payablestime = today;
			  	//调用根据单据日期查询赋值单据号码方法（传参单据日期）
			  	this.gt_select_payablestime(this.advances_received_main_y.priabill_payablestime);
			  }
		  })
			
			layui.use(['laydate','element','form'], function(){
				var laydate = layui.laydate;
				var element = layui.element;
				var form = layui.form;
				laydate.render({
	   				elem: '#date',
	    			done:function(value,date,endDate){//value, date, endDate点击日期、清空、现在、确定均会触发。回调返回三个参数，分别代表：生成的值、日期时间对象、结束的日期时间对象
	       			alert(1111)
        			vue.advances_received_main_y.priabill_payablestime=value;
        			//var value1=value.replace(/-/g,'');
	       			 $.ajax({
					  	type:"get",				  	
					  	url:"http://localhost:8080/SoftwareFactoryProject_/gt_AdvancesReceivedMainY/gt_select_payablestime?payablestime="+value,
						async: false,					  	
					  	success:function(result){alert("sb");
					  		vue.advances_received_main_y.priabill_id = result;
					  	}
					  })
	    			}
			 	});
			});
		</script>
	</body>

</html>